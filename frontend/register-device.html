<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Dispositivo</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #8BC34A, #D32F2F);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .nav-links {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-links a:hover {
            background-color: #D32F2F;
            color: white;
        }

        .nav-links a.active {
            background-color: #8BC34A;
            color: white;
        }

        .device-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            padding: 15px;
            overflow-x: auto;
        }

        .device-card h3 {
            color: #D32F2F;
            margin-bottom: 10px;
        }

        .device-table {
            width: 100%;
            border-collapse: collapse;
        }

        .device-table th, .device-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .device-table th {
            background-color: #8BC34A;
            color: white;
        }

        .device-table tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .content-wrapper {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            font-weight: bold;
            display: block;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .btn {
            background-color: #8BC34A;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .btn:hover {
            background-color: #6D9C36;
        }

    </style>
</head>
<body>

<div class="nav-links">
    <a href="dashboard.html" class="active">Principal</a>
    <a href="register-device.html">Agregar Dispositivo</a>
    <a href="wifi-devices.html">Dispositivos WiFi</a>
    <a href="scanners-printers.html">Scanners e Impresoras</a>
    <a href="search-device.html">Dispositivos Registrados</a>
</div>

<div id="device-container"></div>

<div class="content-wrapper">
    <main>
        <header>
            <h1>Registrar Nuevo Dispositivo</h1>
        </header>
        <form id="register-device-form">
            <!-- Your existing form content remains exactly the same -->
            <div class="form-group">
                <label for="piso">Piso:</label>
                <input type="text" id="piso" name="piso" required>
            </div>
            <div class="form-group">
                <label for="fecha">Fecha:</label>
                <input type="date" id="fecha" name="fecha" required>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre del Equipo:</label>
                <input type="text" id="nombre" name="nombre" required>
            </div>
            <div class="form-group">
                <label for="contrasenaAdmin">Contraseña del Administrador:</label>
                <input type="password" id="contrasenaAdmin" name="contrasenaAdmin" required>
            </div>
            <div class="form-group">
                <label for="ubicacion">Ubicación:</label>
                <input type="text" id="ubicacion" name="ubicacion" required>
            </div>
            <div class="form-group">
                <label for="usuario">Usuario:</label>
                <input type="text" id="usuario" name="usuario" required>
            </div>
            <div class="form-group">
                <label for="usuarioDominio">Usuario de Dominio:</label>
                <input type="text" id="usuarioDominio" name="usuarioDominio" required>
            </div>
            <div class="form-group">
                <label for="tipo">Tipo:</label>
                <select id="tipo" name="tipo" required>
                    <option value="Desktop">Desktop</option>
                    <option value="Portatil">Portatil</option>
                    <option value="Allione">Allione</option>
                </select>
            </div>
            <div class="form-group">
                <label for="ipv4">IPv4:</label>
                <input type="text" id="ipv4" name="ipv4" required>
            </div>
            <div class="form-group">
                <label for="dominio">Dominio:</label>
                <input type="text" id="dominio" name="dominio" required>
            </div>
            <div class="form-group">
                <label for="numeroMac">Número MAC:</label>
                <input type="text" id="numeroMac" name="numeroMac" required>
            </div>
            <div class="form-group">
                <label for="marca">Marca:</label>
                <input type="text" id="marca" name="marca" required>
            </div>
            <div class="form-group">
                <label for="modelo">Modelo:</label>
                <input type="text" id="modelo" name="modelo" required>
            </div>
            <div class="form-group">
                <label for="serial">Serial:</label>
                <input type="text" id="serial" name="serial" required>
            </div>
            <div class="form-group">
                <label for="placa">Placa:</label>
                <input type="text" id="placa" name="placa" required>
            </div>
            <div class="form-group">
                <label for="procesador">Procesador:</label>
                <input type="text" id="procesador" name="procesador" required>
            </div>
            <div class="form-group">
                <label for="discoDuro">Disco Duro:</label>
                <input type="text" id="discoDuro" name="discoDuro" required>
            </div>
            <div class="form-group">
                <label for="memoriaRam">Memoria RAM:</label>
                <input type="text" id="memoriaRam" name="memoriaRam" required>
            </div>
            <div class="form-group">
                <label for="sistemaOperativo">Sistema Operativo:</label>
                <input type="text" id="sistemaOperativo" name="sistemaOperativo" required>
            </div>
            <div class="form-group">
                <label for="antivirus">Antivirus:</label>
                <input type="text" id="antivirus" name="antivirus" required>
            </div>
            <div class="form-group">
                <label for="softOfimatico">Software Ofimático:</label>
                <input type="text" id="softOfimatico" name="softOfimatico" required>
            </div>
            <div class="form-group">
                <label for="navegador">Navegador:</label>
                <input type="text" id="navegador" name="navegador" required>
            </div>
            <div class="form-group">
                <label for="observaciones">Observaciones:</label>
                <textarea id="observaciones" name="observaciones" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label for="licencias">Licencias:</label>
                <input type="text" id="licencias" name="licencias" required>
            </div>
            <button type="submit" class="btn">Registrar Dispositivo</button>
        </form>
    </main>
</div>

<script src="js/register-device.js"></script>

<script>
    const apiUrl = "http://localhost:5000/api/devices";

    async function fetchDevices() {
        try {
            const response = await fetch(apiUrl);
            const devices = await response.json();
            displayDevices(devices);
        } catch (error) {
            console.error("Error al obtener dispositivos:", error);
        }
    }

    function displayDevices(devices) {
        const deviceContainer = document.getElementById("device-container");
        deviceContainer.innerHTML = "";

        const groupedDevices = {};
        devices.forEach(device => {
            if (!groupedDevices[device.ubicacion]) {
                groupedDevices[device.ubicacion] = [];
            }
            groupedDevices[device.ubicacion].push(device);
        });

        Object.keys(groupedDevices).forEach(ubicacion => {
            const devicesList = groupedDevices[ubicacion];
            const card = document.createElement("div");
            card.classList.add("device-card");

            let tableRows = devicesList.map(device => `
                <tr>
                    <td>${device.nombre}</td>
                    <td>${device.tipo}</td>
                    <td>${device.ipv4}</td>
                    <td>${device.ubicacion}</td>

                </tr>
            `).join("");

            card.innerHTML = `
                <h3>${ubicacion} (${devicesList.length} dispositivos)</h3>
                <table class="device-table">
                    <thead><tr><th>Nombre</th><th>Tipo</th><th>IPv4</th><th>ubicacion</th></tr></thead>
                    <tbody>${tableRows}</tbody>
                </table>
            `;

            deviceContainer.appendChild(card);
        });
    }

    document.addEventListener("DOMContentLoaded", fetchDevices);
</script>

</body>
</html>
